<% @page_title = "Choose an account" %>

<% cache [ Current.identity, @memberships ] do %>
  <div
    class="panel panel--centered flex flex-column gap-half"
    style="--popup-icon-size: 24px; --popup-item-padding-inline: 0.5rem;"
  >
    <% if @memberships.present? %>
      <h1 class="txt-x-large font-weight-black margin-none">
        Your Fizzy accounts
      </h1>
      <menu class="popup__list pad border-radius border">
        <% @memberships.each do |membership| %>
          <li class="popup__item txt-medium">
            <%= icon_tag "marker", class: "popup__icon" %>
            <%= link_to root_url(script_name: "/#{membership.tenant}"), class: "btn overflow-ellipsis fill-transparent popup__btn" do %>
              <strong><%= membership.account_name %></strong>
            <% end %>
          </li>
        <% end %>
      </menu>
    <% else %>
      <h1 class="txt-x-large font-weight-black margin-none">Hmm...</h1>
      <p class="margin-none-block-start">You donâ€™t have any Fizzy accounts.</p>
    <% end %>

    <% if defined?(saas) %>
      <div class="margin-block-start">
        <%= link_to saas.new_signup_membership_path, class: "btn btn--plain txt-link center txt-small", data: { turbo_prefetch: false } do %>
          <span>Sign up for a new Fizzy account</span>
        <% end %>
      </div>
    <% end %>
  </div>
<% end %>

<% content_for :footer do %>
  <%= render "sessions/footer" %>
<% end %>
